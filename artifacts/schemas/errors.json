{
  "CapabilityHint": {
    "$defs": {
      "CapabilityId": {
        "description": "Every capability known to Meerkat. Adding a variant forces updates to\nthe registry, error mappings, and codegen templates.",
        "enum": [
          "sessions",
          "streaming",
          "structured_output",
          "hooks",
          "builtins",
          "shell",
          "comms",
          "sub_agents",
          "memory_store",
          "session_store",
          "session_compaction",
          "skills",
          "mcp_live"
        ],
        "type": "string"
      }
    },
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "description": "Hint about which capability is needed.",
    "properties": {
      "capability_id": {
        "$ref": "#/$defs/CapabilityId"
      },
      "message": {
        "type": "string"
      }
    },
    "required": [
      "capability_id",
      "message"
    ],
    "title": "CapabilityHint",
    "type": "object"
  },
  "ErrorCategory": {
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "description": "Error category for grouping.",
    "enum": [
      "session",
      "provider",
      "budget",
      "hook",
      "agent",
      "capability",
      "skill",
      "validation",
      "internal"
    ],
    "title": "ErrorCategory",
    "type": "string"
  },
  "ErrorCode": {
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "description": "Stable error codes for wire protocol.",
    "enum": [
      "SESSION_NOT_FOUND",
      "SESSION_BUSY",
      "SESSION_NOT_RUNNING",
      "PROVIDER_ERROR",
      "BUDGET_EXHAUSTED",
      "HOOK_DENIED",
      "AGENT_ERROR",
      "CAPABILITY_UNAVAILABLE",
      "SKILL_NOT_FOUND",
      "SKILL_RESOLUTION_FAILED",
      "INVALID_PARAMS",
      "INTERNAL_ERROR"
    ],
    "title": "ErrorCode",
    "type": "string"
  },
  "WireError": {
    "$defs": {
      "CapabilityHint": {
        "description": "Hint about which capability is needed.",
        "properties": {
          "capability_id": {
            "$ref": "#/$defs/CapabilityId"
          },
          "message": {
            "type": "string"
          }
        },
        "required": [
          "capability_id",
          "message"
        ],
        "type": "object"
      },
      "CapabilityId": {
        "description": "Every capability known to Meerkat. Adding a variant forces updates to\nthe registry, error mappings, and codegen templates.",
        "enum": [
          "sessions",
          "streaming",
          "structured_output",
          "hooks",
          "builtins",
          "shell",
          "comms",
          "sub_agents",
          "memory_store",
          "session_store",
          "session_compaction",
          "skills",
          "mcp_live"
        ],
        "type": "string"
      },
      "ErrorCategory": {
        "description": "Error category for grouping.",
        "enum": [
          "session",
          "provider",
          "budget",
          "hook",
          "agent",
          "capability",
          "skill",
          "validation",
          "internal"
        ],
        "type": "string"
      },
      "ErrorCode": {
        "description": "Stable error codes for wire protocol.",
        "enum": [
          "SESSION_NOT_FOUND",
          "SESSION_BUSY",
          "SESSION_NOT_RUNNING",
          "PROVIDER_ERROR",
          "BUDGET_EXHAUSTED",
          "HOOK_DENIED",
          "AGENT_ERROR",
          "CAPABILITY_UNAVAILABLE",
          "SKILL_NOT_FOUND",
          "SKILL_RESOLUTION_FAILED",
          "INVALID_PARAMS",
          "INTERNAL_ERROR"
        ],
        "type": "string"
      }
    },
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "description": "Canonical wire error envelope.\n\nSurfaces map this to their native format (RPC error, HTTP response, CLI exit).",
    "properties": {
      "capability_hint": {
        "anyOf": [
          {
            "$ref": "#/$defs/CapabilityHint"
          },
          {
            "type": "null"
          }
        ]
      },
      "category": {
        "$ref": "#/$defs/ErrorCategory"
      },
      "code": {
        "$ref": "#/$defs/ErrorCode"
      },
      "details": true,
      "message": {
        "type": "string"
      }
    },
    "required": [
      "code",
      "category",
      "message"
    ],
    "title": "WireError",
    "type": "object"
  }
}
---
title: "Sessions"
description: "Realm-scoped session lifecycle with deterministic concurrency and cross-surface consistency."
icon: "arrows-rotate"
---

Sessions are realm-scoped. A session is visible across surfaces only when they use the same `realm_id`.

## Lifecycle

| Operation | What it does |
|-----------|-------------|
| `create_session` | Build an agent, run first turn, persist session metadata |
| `start_turn` | Continue existing session; returns `SESSION_BUSY` if a turn is already running |
| `interrupt` | Cancel in-flight turn |
| `read` | Return session state + usage |
| `list` | List sessions in the active realm |
| `archive` | Remove from runtime (and persistent store when supported) |

## Realm visibility rules

| Scenario | Result |
|----------|--------|
| CLI + RPC with same `realm_id` | Shared session visibility |
| CLI + RPC with different `realm_id` | Strict isolation |
| 100 RPC servers, no realm provided | Each gets its own isolated realm by default |
| 100 agents, same explicit `realm_id` | Shared state and consistent visibility |

See [realms](/concepts/realms) for default surface behavior.

## Session metadata

Session metadata now carries realm context:

- `realm_id`
- `instance_id`
- `backend`
- `config_generation`

This allows deterministic resume behavior and cross-surface observability.

## Persistence and backend pinning

Backends are selected once per realm and pinned in `realm_manifest.json`.

| Backend | Notes |
|---------|-------|
| `redb` | Durable embedded database |
| `jsonl` | File-based, inspectable, useful for debugging |

A realm created as `jsonl` stays `jsonl`; a realm created as `redb` stays `redb`.

## Concurrency guarantees

- One turn per session at a time.
- No implicit queueing for concurrent turns.
- `interrupt()` is explicit cancellation.
- Config writes can be synchronized with generation CAS (`expected_generation`) to avoid lost updates during concurrent operations.

## See also

- [Realms](/concepts/realms)
- [Configuration](/concepts/configuration)
- [Session contracts](/reference/session-contracts)

---
title: "CLI configuration"
description: "Realm selection, storage behavior, environment variables, MCP config, and exit codes for rkat."
icon: "sliders"
---

## Global runtime scope flags

All CLI commands accept realm scope flags:

- `--realm <id>`
- `--instance <id>`
- `--realm-backend <redb|jsonl>` (creation hint only)

These flags decide which realm config/session state is used.

## Default realm behavior

| Command surface | Default when `--realm` is omitted |
|----------------|------------------------------------|
| `rkat run`, `rkat resume`, `rkat sessions ...` | Workspace-derived stable realm (`ws-...`) |
| `rkat mob ...` | Workspace-derived stable realm (`ws-...`) |
| `rkat-rpc` | New opaque realm (`realm-...`) |

If you want CLI + RPC to share the same state, pass the same explicit `--realm` to both.

## Environment variables

Required API keys (at least one):

| Variable | Provider |
|----------|----------|
| `ANTHROPIC_API_KEY` | Anthropic Claude |
| `OPENAI_API_KEY` | OpenAI GPT |
| `GOOGLE_API_KEY` / `GEMINI_API_KEY` | Google Gemini |

See [providers](/concepts/providers) for full key precedence (`RKAT_*` variants included).

## Config files

Canonical runtime config for CLI commands is realm-scoped (`<realm>/config.toml` under platform data dir).

Compatibility files still exist:

| Scope | Path |
|-------|------|
| User | `~/.rkat/config.toml` |
| Project | `.rkat/config.toml` |

These are useful for templates (`rkat init`) and compatibility workflows, but realm config is the runtime source of truth for CLI/RPC/REST/MCP surfaces.

## Session storage layout

Realm storage lives under platform data dir:

- macOS: `~/Library/Application Support/meerkat/realms/<realm>/`
- Linux: `~/.local/share/meerkat/realms/<realm>/`
- Windows: `%APPDATA%\meerkat\realms\<realm>\`

Important files:

- `realm_manifest.json` (backend pinning)
- `config.toml` (realm config)
- `sessions.redb` (when backend is redb)
- `sessions_jsonl/` (when backend is jsonl)
- `mob_registry.json` (CLI mob registry)
- `mob_registry.lock` (CLI mob registry lock)

`--realm-backend` is a creation hint. After first realm creation, backend selection is pinned by `realm_manifest.json`.
This applies to both session storage and `rkat mob` command behavior in that realm.

## MCP configuration

MCP servers are configured separately from realm runtime state:

| Scope | Path |
|-------|------|
| User | `~/.rkat/mcp.toml` |
| Project | `.rkat/mcp.toml` |

Project servers override user servers with the same name.

## Exit codes

| Code | Meaning |
|------|---------|
| 0 | Success |
| 1 | Internal error |
| 2 | Budget exhausted |
| 10 | Session not found |
| 11 | Session busy |
| 12 | Session not running |
| 20 | Provider error |
| 21 | Budget exhausted |
| 22 | Hook denied |
| 30 | Agent error |
| 40 | Capability unavailable |
| 41 | Skill not found |
| 42 | Skill resolution failed |

## See also

- [Realms](/concepts/realms)
- [CLI commands](/cli/commands)
- [Configuration](/concepts/configuration)

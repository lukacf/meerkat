---
title: "CLI commands"
description: "Command reference for rkat with realm-first runtime scoping."
icon: "terminal"
---

`rkat` is realm-first. All commands accept global scope flags:

```bash
rkat [--realm <id>] [--instance <id>] [--realm-backend <redb|jsonl>] <command> ...
```

## Common commands

| Command | Purpose |
|---------|---------|
| `init` | Initialize local project compatibility config (`.rkat/config.toml`) |
| `run` | Create and run a session |
| `resume` | Continue an existing session |
| `sessions list/show/delete` | Inspect or remove sessions in active realm |
| `config get/set/patch` | Read or mutate realm config |
| `mcp ...` | Manage MCP server config |
| `mob ...` | Manage mob lifecycle directly from CLI |
| `capabilities` | Show resolved runtime capabilities |

## Realm behavior by command

| Command surface | Default without `--realm` |
|----------------|----------------------------|
| `run`, `resume`, `sessions ...` | Workspace-derived stable realm (`ws-...`) |
| `rkat-rpc` | New opaque realm (`realm-...`) |

To share state between CLI and RPC, use the same explicit realm:

```bash
rkat --realm team-alpha run "Plan release"
rkat --realm team-alpha sessions list
rkat-rpc --realm team-alpha
```

## run

```bash
rkat run [OPTIONS] <PROMPT>
```

Frequently used options:

- `--model <MODEL>`
- `--provider <anthropic|openai|gemini>`
- `--stream`
- `--output <text|json>`
- `--max-tokens <N>`
- `--max-total-tokens <N>`
- `--max-duration <DURATION>`
- `--max-tool-calls <N>`
- `--enable-builtins`
- `--enable-shell` (requires `--enable-builtins`)
- `--no-subagents`
- `--hooks-override-json <JSON>`
- `--hooks-override-file <FILE>`

`run` composes the mob tool surface (backed by `meerkat-mob-mcp`) into the agent tool list (`mob_create`, `mob_list`, `mob_status`, `mob_spawn`, `mob_retire`, `mob_wire`, `mob_unwire`, `mob_external_turn`, `mob_events`, `mob_list_meerkats`, `mob_stop`, `mob_resume`, `mob_complete`, `mob_destroy`).
These are available even when built-ins are disabled.

For mob workflows, this tool path is the primary CLI UX:

```bash
rkat run "create a mob for release triage with 1 lead and 3 workers"
```

If external MCP servers define a tool with the same name, the mob tool dispatcher wins.

Comms options:

- `--comms-name <NAME>`
- `--comms-listen-tcp <ADDR>`
- `--no-comms`
- `--host`
- `--stdin`

## resume

```bash
rkat resume <SESSION_ID> <PROMPT>
```

Resumes a session from the active realm.

Like `run`, `resume` composes the `mob_*` tool surface.

## mob

```bash
rkat mob prefabs
rkat mob create --prefab <NAME>
rkat mob create --definition <FILE.toml>
rkat mob list
rkat mob status <MOB_ID>
rkat mob spawn <MOB_ID> <PROFILE> <MEERKAT_ID>
rkat mob retire <MOB_ID> <MEERKAT_ID>
rkat mob wire <MOB_ID> <A> <B>
rkat mob unwire <MOB_ID> <A> <B>
rkat mob turn <MOB_ID> <MEERKAT_ID> <MESSAGE>
rkat mob stop <MOB_ID>
rkat mob resume <MOB_ID>
rkat mob complete <MOB_ID>
rkat mob flows <MOB_ID>
rkat mob run-flow <MOB_ID> --flow <FLOW_ID> [--params <JSON_OBJECT>]
rkat mob flow-status <MOB_ID> <RUN_ID>
rkat mob destroy <MOB_ID>
```

CLI `mob` commands are the explicit compatibility/operational surface for persisted mob state in the local registry.
Primary day-to-day mob usage on CLI is tool-driven through `run`/`resume`; this command group is for direct/manual control.

Flow commands:

- `mob flows`: list configured flow IDs in a mob definition.
- `mob run-flow`: starts a run and waits for terminal state before returning `run_id`.
- `mob flow-status`: returns JSON `MobRun` (or `null`) for the run.

`mob run-flow` persists terminal status snapshots, and `mob flow-status` prefers live runtime status when available, then terminal snapshots as fallback.

## sessions

```bash
rkat sessions list [--limit N]
rkat sessions show <ID>
rkat sessions delete <ID>
```

These commands read/write through the same session service path used by `run` and `resume`.

## config

```bash
rkat config get [--format toml|json] [--with-generation]
rkat config set --file config.toml [--expected-generation N]
rkat config set --json '{"agent":{"model":"gpt-5.2"}}'
rkat config patch --json '{"budget":{"max_tokens":50000}}' [--expected-generation N]
```

Config operations are realm-scoped.

- `config get --with-generation` returns envelope-style metadata (JSON) or prepends generation info (TOML).
- `config set/patch --expected-generation N` enforces optimistic concurrency (CAS) for safe concurrent edits.

## rkat-rpc

```bash
rkat-rpc [--realm <id>] [--isolated] [--instance <id>] [--realm-backend <redb|jsonl>] [--state-root <path>] [--context-root <path>] [--user-config-root <path>]
```

Starts JSON-RPC 2.0 over stdio.

Pass `--realm` when you want deterministic shared state with other surfaces or processes:

```bash
rkat-rpc --realm team-alpha
```

## mcp

```bash
rkat mcp add <NAME> -- <COMMAND> [ARGS...]
rkat mcp add <NAME> --url <URL>
rkat mcp list [--scope user|project] [--json]
rkat mcp get <NAME> [--scope user|project] [--json]
rkat mcp remove <NAME> [--scope user|project]
```

MCP config is stored in `.rkat/mcp.toml` (project) and `~/.rkat/mcp.toml` (user).

## capabilities

```bash
rkat capabilities
```

Shows status per capability (`Available`, `DisabledByPolicy`, `NotCompiled`, `NotSupportedByProtocol`).

## See also

- [Realms](/concepts/realms)
- [CLI configuration](/cli/configuration)
- [JSON-RPC](/api/rpc)
- [Tools](/concepts/tools)
